<div class="mx-auto md:w-2/3 w-full">
  <h1 class="font-bold text-4xl">New widget</h1>

  <div class="flex gap-x-12">
    <div class="basis-1/2">
      <%= render "form", widget: @widget %>
    </div>
    <div class="basis-1/2">
      <span>Preview your widget</span>
      <%= render "snippet/form" %>
    </div>
  </div>
</div>

<script type="text/javascript">
  function previewWelcomeMessage(el) {
    document.getElementById('blog_text_widget_welcome_message').innerText = el.value;
  }

  function previewBackgroundColor(colorPicker) {
    Array.from(document.getElementsByClassName('blog_text_widget_background_color')).forEach(function(el) {
      el.style.backgroundColor = colorPicker.value;
    });
  }

  function disableForm() {
    document.getElementById('message_name').disabled = true;
    document.getElementById('message_email').disabled = true;
    document.getElementById('message_content').disabled = true;
    document.getElementById('message_submit').disabled = true;
  }

  function setDefaults() {
    document.getElementById('widget_welcome_message').value = 'Drop me a line';
    previewWelcomeMessage(document.getElementById('widget_welcome_message'));
    document.getElementById('widget_background_color').value = '#07c514';
    previewBackgroundColor(document.getElementById('widget_background_color'));
  }

  disableForm();
  setDefaults();
</script>