<script type="text/javascript">
  function previewWelcomeMessage(el) {
    document.getElementById('blog_text_widget_welcome_message').innerText = el.value;
  }

  function previewThanksMessage(el) {
    document.getElementById('blog_text_widget_thanks_message').textContent = el.value;
  }

  function previewBackgroundColor(colorPicker) {
    Array.from(document.getElementsByClassName('blog_text_widget_background_color')).forEach(function(el) {
      el.style.backgroundColor = colorPicker.value;
    });
  }

  function previewFontColor(colorPicker) {
    Array.from(document.getElementsByClassName('blog_text_widget_font_color')).forEach(function(el) {
      el.style.color = colorPicker.value;
    });
  }

  function disableForm() {
    document.getElementById('message_name').disabled = true;
    document.getElementById('message_email').disabled = true;
    document.getElementById('message_content').disabled = true;
    document.getElementById('message_submit').disabled = true;
  }

  function setDefaults() {
    let welcomeMessage = document.getElementById('widget_welcome_message');

    if (welcomeMessage.value == '') {
      welcomeMessage.value = 'Drop me a line';
    }
    previewWelcomeMessage(welcomeMessage);

    let thanksMessage = document.getElementById('widget_thanks_message');

    if (thanksMessage.value == '') {
      thanksMessage.value = 'Thanks for your message!';
    }
    previewThanksMessage(thanksMessage);

    let backgroundColor = document.getElementById('widget_background_color');

    if (backgroundColor.value == '#000000') { // nil picker will be black
    backgroundColor.value = '#249315';
    }
    previewBackgroundColor(backgroundColor);

    let fontColor = document.getElementById('widget_font_color');

    if (fontColor.value == '#000000') { // nil picker will be black
    fontColor.value = '#249315';
    }
    previewFontColor(fontColor);
  }

  function showThanks() {
    var thanks = document.createElement('div');
    thanks.id = "blog_text_widget_thanks_message";
    var form = document.getElementById('new_message');
    form.appendChild(thanks);
  }

  disableForm();
  showThanks();
  setDefaults();
</script>