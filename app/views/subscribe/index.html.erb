<%= render partial: "shared/heading", locals: { title: 'Go Pro', tagline: "Unlock unlimited widgets, messages, and text notifications for just $5 /month", extra_classes: 'text-center' } %>

  <div class="text-center inline-flex rounded-md shadow">
    <button onclick="beginSubscription()" type="submit" class="items-center justify-center px-5 py-3 border border-transparent text-base font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700">
      Subscribe
    </button>
  </div>
</div>

<script type="text/javascript">
  var beginSubscription = function() {
    console.log('building subscription...');

    $.ajax({
      url: '<%= billing_portal_index_path %>',
      method: 'POST',
      dataType: 'json',
      data: {},
      success: function(data) {
        console.log('success! portal url: ', data.url)
        window.location.href = data.url;
      },
      error: function(data) {
        window.alert('Sorry, something went wrong. Please try again.');
      }
    })
  }
</script>
